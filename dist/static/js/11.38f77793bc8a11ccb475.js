webpackJsonp([11],{EE4G:function(t,e,n){var r=n("EOTr");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n("8bSs")("4705a407",r,!0)},EOTr:function(t,e,n){(t.exports=n("BkJT")(!1)).push([t.i,"",""])},"L+RB":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("IHPB"),o=n.n(r),a=n("U4Ig"),i=n.n(a),l=n("53J+");e.default={name:"data_gateLock",components:{GridUnit:i.a},filters:{},data:function(){return{tableHeight:300,colModels:[{prop:"cityName",label:"城市"},{prop:"needCount",label:"需安装数",sortable:!0},{prop:"alreadyCount",label:"已安装数",sortable:!0},{prop:"notInstallCount",label:"未安装数",sortable:!0},{prop:"installRatio",label:"安装率 %",sortable:!0,render:function(t){return 1*t.installRatio.replace(/%/gi,"")}},{prop:"linkRatio",label:"连通率 %",sortable:!0,render:function(t){return 1*t.linkRatio.replace(/%/gi,"")}},{prop:"linkCount",label:"连接数",sortable:!0}],url:"/tongji/data/getDeviceStatusList"}},mounted:function(){var t=this;this.$nextTick(function(){var e=t.$refs.refGridUnit.$el.offsetTop||140,n=document.body.clientHeight-e-5-20;t.tableHeight=n>300?n:300,window.onresize=function(){return n=document.body.clientHeight-e-5-20,void(t.tableHeight=t.tableHeight=n>300?n:300)}})},computed:{},methods:{handleExport:function(){var t=this;this.downloadLoading=!0,Object(l.d)(this.params).then(function(e){e.dataObject.map(function(t,e){t.index=1*e+1}),Promise.all([n.e(17),n.e(18)]).then(function(){var r=n("zWO4").export_json_to_excel,a=t.colModels.map(function(t){return t.label}),i=t.colModels.map(function(t){return t.prop}),l=t.formatJson(["index"].concat(o()(i)),e.dataObject||[]);r(["序号"].concat(o()(a)),l,"门锁数据"+t.params.startDateStr+" - "+t.params.endDateStr,"门锁数据"+t.params.startDateStr+" - "+t.params.endDateStr),t.downloadLoading=!1}.bind(null,n)).catch(n.oe)})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return e[t]})})},getSummaries:function(t){var e=t.columns,n=t.data,r=[];return e.forEach(function(t,e){if(0!==e){var o=n.map(function(e){return"installRatio"===t.property||"linkRatio"===t.property?1*e[t.property].replace(/%/gi,""):Number(e[t.property])});o.every(function(t){return isNaN(t)})?r[e]="":r[e]=o.reduce(function(t,e){var n=Number(e);return isNaN(n)?t:t+e},0)}else r[e]="合计"}),r}}}},bJo7:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"layout-container"},[e("el-form",{attrs:{inline:!0,size:"small"}},[e("el-form-item",[e("el-button",{attrs:{type:"primary",icon:"el-icon-upload"},on:{click:this.handleExport}},[this._v("导出")])],1)],1),this._v(" "),e("GridUnit",{ref:"refGridUnit",attrs:{columns:this.colModels,url:this.url,listField:"dataObject.dataList",height:this.tableHeight,"show-summary":"","summary-method":this.getSummaries,showPagination:!1}})],1)},staticRenderFns:[]}},pOAY:function(t,e,n){var r=n("Alxp")(n("L+RB"),n("bJo7"),function(t){n("EE4G")},null,null);t.exports=r.exports}});